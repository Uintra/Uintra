<ul class="left-nav">
  <ng-container
    *ngTemplateOutlet="recursiveMenu; context: { $implicit: navigationItems }"
  >
  </ng-container>
</ul>

<ng-template #recursiveMenu let-menus>
  <li *ngFor="let item of menus" class="left-nav__item">
    <a
      class="left-nav__item-link"
      routerLinkActive="left-nav__item-link--active"
      [routerLink]="item.url"
      [ngStyle]="getNestingPadding(item.level)"
      [routerLinkActiveOptions]="{ exact: true }"
    >
      {{ item.name }}
    </a>

    <button
      *ngIf="item.children.length"
      class="left-nav__arrow"
      [ngClass]="{ active: item.isSelected }"
      (click)="onToggleItem(item)"
    >
      Expand
    </button>

    <ng-container *ngIf="item.children.length">
      <ul
        class="left-nav__sub-item"
        [hidden]="!item.isSelected"
        [ngClass]="{ active: item.isSelected }"
      >
        <ng-container
          *ngTemplateOutlet="
            recursiveMenu;
            context: { $implicit: item.children, index: i }
          "
        ></ng-container>
      </ul>
    </ng-container>
  </li>
</ng-template>
