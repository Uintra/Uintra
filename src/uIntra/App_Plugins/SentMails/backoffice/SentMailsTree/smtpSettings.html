<umb-panel ng-controller="smtpSettingsController as smtpCtrl">
    <umb-header>
        <!--header title-->
        <div class="umb-headline-editor-wrapper span12 ng-scope">
            <h1 class="ng-binding">Smtp Settings</h1>
        </div>
    </umb-header>

    <div class="umb-panel-body">
        <div class="umb-pane">
            <form name="settingsForm" ng-submit="smtpCtrl.save()">
                <div class="smtp-settings" style="margin-bottom: 125px;">

                    <div>
                        <label class="control-label property-name">Email</label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.Email" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">Display Name</label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.DisplayName" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">Host</label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.Host" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">Port</label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.Port" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">Username</label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.Username" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">Password</label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.Password" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">
                            Timeout (ms)
                            <small style="width: 160px; line-height: 13px;">If value will empty then will use max timeout.</small>
                        </label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.Timeout" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">
                            Spam time (minutes)
                            <small style="width: 160px; line-height: 13px;">If value will empty then we don't use spam filter</small>
                        </label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.SpamTime" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">
                            Number of attempts to send
                            <small style="width: 160px; line-height: 13px;">If value will empty then will use 1 attempt.</small>
                        </label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.AttemptsNumber" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">
                            Stupid check code
                            <small style="width: 160px; line-height: 13px;">If value will empty then will not use code for check.</small>
                        </label>
                        <div class="controls controls-row">
                            <input type="text" ng-model="smtpCtrl.smtpSettings.ValidCode" class="umb-editor umb-textstring" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">Enable Ssl</label>
                        <div class="controls controls-row">
                            <input type="checkbox" ng-model="smtpCtrl.smtpSettings.EnableSsl" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">Use Default Credentials</label>
                        <div class="controls controls-row">
                            <input type="checkbox" ng-model="smtpCtrl.smtpSettings.UseDefaultCredentials" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">
                            Is Test Mode
                            <small style="width: 160px; line-height: 13px;">If value will true, mail will not sending but will add in db as IsSent = true</small>
                        </label>
                        <div class="controls controls-row">
                            <input type="checkbox" ng-model="smtpCtrl.smtpSettings.IsTestMode" />
                        </div>
                    </div>

                    <div>
                        <label class="control-label property-name">
                            Automatic remove old log data (GDPR)
                            <small style="width: 160px; line-height: 13px;">if value is true, all mails will be deleted after N days"</small>
                        </label>
                        <div class="controls controls-row">
                            <input type="checkbox" ng-model="smtpCtrl.smtpSettings.UseGdpr" />
                            <div class="controls" ng-if="smtpCtrl.smtpSettings.UseGdpr">
                                <input type="number" name="gdprDaysCount" min="1" max="356" required ng-model="smtpCtrl.smtpSettings.GdprDaysCount" class="umb-editor umb-textstring" />
                            </div>
                        </div>
                    </div>

                    <div class="umb-tab-buttons" style="bottom: 0 !important; height: 75px; margin: 0;" detect-fold>
                        <div class="btn-group">
                            <button type="submit" data-hotkey="ctrl+s" class="btn btn-success" ng-disabled="smtpCtrl.isSaveBtnDisable">
                                <localize key="buttons_save">Save</localize>
                            </button>
                        </div>
                    </div>

                </div>

                <div ng-if="smtpCtrl.smtpSettings === null || smtpCtrl.smtpSettings == 'null'">
                    Please wait, maybe solution is builds or db table is empty.
                </div>
            </form>
        </div>
    </div>
</umb-panel>
